<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ MATH QUEST - –£–º–Ω–æ–∂–µ–Ω–∏–µ –Ω–∞ –¥–µ—Å–µ—Ç–∏—á–Ω–∏ –¥—Ä–æ–±–∏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: white;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #667eea; }
            to { text-shadow: 0 0 20px #fff, 0 0 30px #764ba2, 0 0 40px #764ba2; }
        }

        .subtitle {
            text-align: center;
            font-size: 1.2em;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .leaderboard {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border: 2px solid rgba(255,255,255,0.2);
        }

        .leaderboard h2 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .leaderboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .team-score {
            background: rgba(255,255,255,0.15);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .team-score:hover {
            transform: translateY(-5px);
            border-color: rgba(255,255,255,0.5);
        }

        .team-score h3 {
            font-size: 1.3em;
            margin-bottom: 10px;
        }

        .team-score .score {
            font-size: 2.5em;
            font-weight: bold;
            color: #FFD700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .team-score .progress {
            margin-top: 10px;
            font-size: 0.9em;
            opacity: 0.8;
        }

        .teams-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .team-card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            border: 3px solid;
            transition: all 0.3s ease;
        }

        .team-card:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .team-1 { border-color: #ff6b6b; }
        .team-2 { border-color: #4ecdc4; }
        .team-3 { border-color: #95e1d3; }
        .team-4 { border-color: #ffe66d; }
        .team-5 { border-color: #c77dff; }
        .team-6 { border-color: #ff9f43; }

        .team-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255,255,255,0.3);
        }

        .team-header h2 {
            font-size: 1.8em;
            margin-bottom: 5px;
        }

        .team-header .team-points {
            font-size: 2em;
            font-weight: bold;
            color: #FFD700;
        }

        .mission {
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 12px;
            border-left: 4px solid rgba(255,255,255,0.5);
        }

        .mission.completed {
            background: rgba(76, 175, 80, 0.3);
            border-left-color: #4CAF50;
        }

        .mission.incorrect {
            background: rgba(244, 67, 54, 0.3);
            border-left-color: #f44336;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .mission-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .mission-number {
            font-weight: bold;
            font-size: 1.1em;
        }

        .mission-status {
            font-size: 1.5em;
        }

        .mission-question {
            font-size: 1.3em;
            margin: 10px 0;
            text-align: center;
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 5px;
        }

        .mission-input {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .mission-input input {
            flex: 1;
            padding: 12px;
            font-size: 1.1em;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            background: rgba(255,255,255,0.9);
            transition: all 0.3s ease;
        }

        .mission-input input:focus {
            outline: none;
            border-color: #FFD700;
            box-shadow: 0 0 10px rgba(255,215,0,0.5);
        }

        .mission-input button {
            padding: 12px 25px;
            font-size: 1.1em;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mission-input button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .mission-input button:active {
            transform: scale(0.95);
        }

        .mission-input button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .celebration {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            padding: 50px;
            border-radius: 20px;
            text-align: center;
            z-index: 1000;
            display: none;
            border: 3px solid #FFD700;
        }

        .celebration.show {
            display: block;
            animation: popIn 0.5s ease;
        }

        @keyframes popIn {
            0% { transform: translate(-50%, -50%) scale(0); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        .celebration h2 {
            font-size: 3em;
            margin-bottom: 20px;
            color: #FFD700;
        }

        .celebration p {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .timer {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 1.5em;
            font-weight: bold;
            border: 2px solid #FFD700;
            z-index: 100;
        }

        .controls {
            text-align: center;
            margin-bottom: 30px;
        }

        .controls button {
            padding: 15px 40px;
            font-size: 1.2em;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            margin: 0 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .start-btn {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }

        .reset-btn {
            background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
            color: white;
        }

        .controls button:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        @media (max-width: 768px) {
            h1 { font-size: 2em; }
            .teams-grid { grid-template-columns: 1fr; }
            .leaderboard-grid { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÆ MATH QUEST</h1>
        <p class="subtitle">–£–º–Ω–æ–∂–µ–Ω–∏–µ –Ω–∞ –¥–µ—Å–µ—Ç–∏—á–Ω–∏ –¥—Ä–æ–±–∏ - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ —Å—ä—Å—Ç–µ–∑–∞–Ω–∏–µ</p>

        <div class="timer" id="timer">‚è±Ô∏è 00:00</div>

        <div class="controls">
            <button class="start-btn" onclick="startGame()">üöÄ –°–¢–ê–†–¢ –ò–ì–†–ê</button>
            <button class="reset-btn" onclick="resetGame()">üîÑ –†–ï–°–¢–ê–†–¢</button>
        </div>

        <div class="leaderboard">
            <h2>üèÜ –ö–õ–ê–°–ê–¶–ò–Ø</h2>
            <div class="leaderboard-grid" id="leaderboard"></div>
        </div>

        <div class="teams-grid" id="teamsGrid"></div>
    </div>

    <div class="celebration" id="celebration">
        <h2>üéâ –ü–û–ó–î–†–ê–í–õ–ï–ù–ò–Ø! üéâ</h2>
        <p id="celebrationText"></p>
    </div>

    <script>
        // –î–∞–Ω–Ω–∏ –∑–∞ –º–∏—Å–∏–∏—Ç–µ –Ω–∞ –≤—Å–µ–∫–∏ –µ–∫–∏–ø - —Ñ–æ—Ä–º–∞—Ç –∫–∞—Ç–æ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ç–∞
        const teamsData = {
            1: {
                name: "RED HACKERS",
                color: "#ff6b6b",
                missions: [
                    { question: "3.7 √ó 3.2", answer: 11.84, letter: "–ú" },
                    { question: "7.4 √ó 0.6", answer: 4.44, letter: "–ê" },
                    { question: "8.9 √ó 2.3", answer: 20.47, letter: "–¢" },
                    { question: "21.5 √ó 0.72", answer: 15.48, letter: "–ï" },
                    { question: "5.7 √ó 1.25", answer: 7.125, letter: "–ú" },
                    { question: "8.13 √ó 4.32", answer: 35.1216, letter: "–ê" },
                    { question: "0.16 √ó 0.01", answer: 0.0016, letter: "–¢" },
                    { question: "42.23 √ó 0.07", answer: 2.9561, letter: "–ò" }
                ]
            },
            2: {
                name: "BLUE CODERS",
                color: "#4ecdc4",
                missions: [
                    { question: "2.8 √ó 1.5", answer: 4.2, letter: "–ö" },
                    { question: "6.3 √ó 0.4", answer: 2.52, letter: "–û" },
                    { question: "9.2 √ó 3.1", answer: 28.52, letter: "–ú" },
                    { question: "12.4 √ó 0.05", answer: 0.62, letter: "–ü" },
                    { question: "4.15 √ó 2.2", answer: 9.13, letter: "–Æ" },
                    { question: "7.08 √ó 1.25", answer: 8.85, letter: "–¢" },
                    { question: "0.24 √ó 0.03", answer: 0.0072, letter: "–™" },
                    { question: "31.5 √ó 0.08", answer: 2.52, letter: "–†" }
                ]
            },
            3: {
                name: "GREEN BYTES",
                color: "#95e1d3",
                missions: [
                    { question: "5.6 √ó 2.3", answer: 12.88, letter: "–ê" },
                    { question: "8.1 √ó 0.7", answer: 5.67, letter: "–õ" },
                    { question: "3.9 √ó 4.2", answer: 16.38, letter: "–ì" },
                    { question: "18.7 √ó 0.15", answer: 2.805, letter: "–û" },
                    { question: "6.25 √ó 1.6", answer: 10, letter: "–†" },
                    { question: "9.04 √ó 2.5", answer: 22.6, letter: "–ò" },
                    { question: "0.35 √ó 0.02", answer: 0.007, letter: "–¢" },
                    { question: "52.8 √ó 0.06", answer: 3.168, letter: "–™" }
                ]
            },
            4: {
                name: "YELLOW PIXELS",
                color: "#ffe66d",
                missions: [
                    { question: "4.3 √ó 1.8", answer: 7.74, letter: "–†" },
                    { question: "7.2 √ó 0.9", answer: 6.48, letter: "–ï" },
                    { question: "5.5 √ó 3.4", answer: 18.7, letter: "–®" },
                    { question: "23.6 √ó 0.25", answer: 5.9, letter: "–ï" },
                    { question: "8.14 √ó 1.5", answer: 12.21, letter: "–ù" },
                    { question: "6.09 √ó 3.2", answer: 19.488, letter: "–ò" },
                    { question: "0.48 √ó 0.05", answer: 0.024, letter: "–ï" },
                    { question: "64.2 √ó 0.04", answer: 2.568, letter: "!" }
                ]
            },
            5: {
                name: "PURPLE LOGIC",
                color: "#c77dff",
                missions: [
                    { question: "3.5 √ó 2.4", answer: 8.4, letter: "–£" },
                    { question: "6.8 √ó 0.8", answer: 5.44, letter: "–°" },
                    { question: "4.7 √ó 5.1", answer: 23.97, letter: "–ü" },
                    { question: "15.3 √ó 0.35", answer: 5.355, letter: "–ï" },
                    { question: "7.26 √ó 1.8", answer: 13.068, letter: "–•" },
                    { question: "8.15 √ó 2.6", answer: 21.19, letter: "!" },
                    { question: "0.56 √ó 0.04", answer: 0.0224, letter: "!" },
                    { question: "71.4 √ó 0.09", answer: 6.426, letter: "!" }
                ]
            },
            6: {
                name: "ORANGE DATA",
                color: "#ff9f43",
                missions: [
                    { question: "2.9 √ó 3.6", answer: 10.44, letter: "–ë" },
                    { question: "5.4 √ó 0.5", answer: 2.7, letter: "–†" },
                    { question: "7.8 √ó 4.3", answer: 33.54, letter: "–ê" },
                    { question: "19.2 √ó 0.45", answer: 8.64, letter: "–í" },
                    { question: "6.37 √ó 2.1", answer: 13.377, letter: "–û" },
                    { question: "9.12 √ó 1.75", answer: 15.96, letter: "!" },
                    { question: "0.67 √ó 0.06", answer: 0.0402, letter: "!" },
                    { question: "83.5 √ó 0.03", answer: 2.505, letter: "!" }
                ]
            }
        };

        // –°—ä—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –∏–≥—Ä–∞—Ç–∞
        let gameState = {};
        let timerInterval;
        let startTime;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function initGame() {
            for (let teamId in teamsData) {
                gameState[teamId] = {
                    points: 0,
                    completed: 0,
                    missions: teamsData[teamId].missions.map(() => ({ 
                        status: 'pending', 
                        attempts: 0 
                    }))
                };
            }
            renderTeams();
            updateLeaderboard();
        }

        // –†–µ–Ω–¥–∏—Ä–∞–Ω–µ –Ω–∞ –µ–∫–∏–ø–∏—Ç–µ
        function renderTeams() {
            const grid = document.getElementById('teamsGrid');
            grid.innerHTML = '';

            for (let teamId in teamsData) {
                const team = teamsData[teamId];
                const state = gameState[teamId];
                
                const teamCard = document.createElement('div');
                teamCard.className = `team-card team-${teamId}`;
                teamCard.innerHTML = `
                    <div class="team-header">
                        <h2>üî• ${team.name}</h2>
                        <div class="team-points">${state.points} —Ç–æ—á–∫–∏</div>
                        <div class="progress">${state.completed}/8 –º–∏—Å–∏–∏</div>
                    </div>
                    <div id="missions-${teamId}"></div>
                `;
                grid.appendChild(teamCard);

                renderMissions(teamId);
            }
        }

        // –†–µ–Ω–¥–∏—Ä–∞–Ω–µ –Ω–∞ –º–∏—Å–∏–∏—Ç–µ –∑–∞ –µ–∫–∏–ø
        function renderMissions(teamId) {
            const container = document.getElementById(`missions-${teamId}`);
            const team = teamsData[teamId];
            const state = gameState[teamId];
            
            container.innerHTML = '';
            
            team.missions.forEach((mission, index) => {
                const missionState = state.missions[index];
                const missionDiv = document.createElement('div');
                missionDiv.className = `mission ${missionState.status}`;
                
                let statusIcon = '‚è≥';
                if (missionState.status === 'completed') statusIcon = '‚úÖ';
                if (missionState.status === 'incorrect') statusIcon = '‚ùå';
                
                missionDiv.innerHTML = `
                    <div class="mission-header">
                        <span class="mission-number">–ú–∏—Å–∏—è ${index + 1}</span>
                        <span class="mission-status">${statusIcon}</span>
                    </div>
                    <div class="mission-question">${mission.question} = ?</div>
                    <div class="mission-input">
                        <input 
                            type="number" 
                            step="0.1" 
                            id="input-${teamId}-${index}"
                            placeholder="–í—ä–≤–µ–¥–∏ –æ—Ç–≥–æ–≤–æ—Ä"
                            ${missionState.status === 'completed' ? 'disabled' : ''}
                            onkeypress="if(event.key==='Enter') checkAnswer(${teamId}, ${index})"
                        >
                        <button 
                            onclick="checkAnswer(${teamId}, ${index})"
                            ${missionState.status === 'completed' ? 'disabled' : ''}
                        >
                            ${missionState.status === 'completed' ? '‚úì –†–µ—à–µ–Ω–∞' : '–ü—Ä–æ–≤–µ—Ä–∫–∞'}
                        </button>
                    </div>
                `;
                
                container.appendChild(missionDiv);
            });
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—Ç–≥–æ–≤–æ—Ä
        function checkAnswer(teamId, missionIndex) {
            const input = document.getElementById(`input-${teamId}-${missionIndex}`);
            const userAnswer = parseFloat(input.value);
            const correctAnswer = teamsData[teamId].missions[missionIndex].answer;
            const state = gameState[teamId];
            
            if (isNaN(userAnswer)) {
                alert('–ú–æ–ª—è, –≤—ä–≤–µ–¥–∏ —á–∏—Å–ª–æ–≤ –æ—Ç–≥–æ–≤–æ—Ä!');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å —Ç–æ–ª–µ—Ä–∞–Ω—Å –∑–∞ –¥–µ—Å–µ—Ç–∏—á–Ω–∏ —á–∏—Å–ª–∞
            // –ó–∞ –ø–æ-–≥–æ–ª—è–º–∞ —Ç–æ—á–Ω–æ—Å—Ç –ø—Ä–∏ –¥–µ—Å–µ—Ç–∏—á–Ω–∏ –¥—Ä–æ–±–∏
            const tolerance = correctAnswer < 1 ? 0.0001 : 0.01;
            const isCorrect = Math.abs(userAnswer - correctAnswer) < tolerance;
            
            if (isCorrect) {
                state.missions[missionIndex].status = 'completed';
                state.points += 10;
                state.completed += 1;
                
                // –ü—Ä–∞–∑–Ω—É–≤–∞–Ω–µ –ø—Ä–∏ –∑–∞–≤—ä—Ä—à–≤–∞–Ω–µ –Ω–∞ –≤—Å–∏—á–∫–∏ –º–∏—Å–∏–∏
                if (state.completed === 8) {
                    const code = teamsData[teamId].missions.map(m => m.letter).join('');
                    showCelebration(teamId, code);
                }
                
                playSound('success');
            } else {
                state.missions[missionIndex].status = 'incorrect';
                state.missions[missionIndex].attempts += 1;
                playSound('error');
                
                setTimeout(() => {
                    state.missions[missionIndex].status = 'pending';
                    renderMissions(teamId);
                }, 1000);
            }
            
            renderMissions(teamId);
            updateLeaderboard();
        }

        // –û–±–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ –∫–ª–∞—Å–∞—Ü–∏—è—Ç–∞
        function updateLeaderboard() {
            const leaderboard = document.getElementById('leaderboard');
            const teams = Object.keys(gameState).map(id => ({
                id,
                name: teamsData[id].name,
                points: gameState[id].points,
                completed: gameState[id].completed
            }));
            
            teams.sort((a, b) => {
                if (b.points !== a.points) return b.points - a.points;
                return b.completed - a.completed;
            });
            
            leaderboard.innerHTML = teams.map((team, index) => {
                let medal = '';
                if (index === 0) medal = 'ü•á';
                if (index === 1) medal = 'ü•à';
                if (index === 2) medal = 'ü•â';
                
                return `
                    <div class="team-score">
                        <h3>${medal} ${team.name}</h3>
                        <div class="score">${team.points}</div>
                        <div class="progress">${team.completed}/8 –º–∏—Å–∏–∏</div>
                    </div>
                `;
            }).join('');
        }

        // –ü–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ –ø—Ä–∞–∑–Ω—É–≤–∞–Ω–µ
        function showCelebration(teamId, code) {
            const celebration = document.getElementById('celebration');
            const text = document.getElementById('celebrationText');
            
            text.innerHTML = `
                <strong>${teamsData[teamId].name}</strong> –∑–∞–≤—ä—Ä—à–∏ –≤—Å–∏—á–∫–∏ –º–∏—Å–∏–∏!<br>
                üîê –ö–æ–¥: <strong>${code}</strong><br>
                üí∞ –¢–æ—á–∫–∏: <strong>${gameState[teamId].points}</strong>
            `;
            
            celebration.classList.add('show');
            
            setTimeout(() => {
                celebration.classList.remove('show');
            }, 5000);
        }

        // –ó–≤—É–∫–æ–≤–∏ –µ—Ñ–µ–∫—Ç–∏ (—Å–∏–º—É–ª–∏—Ä–∞–Ω–∏)
        function playSound(type) {
            // –ú–æ–∂–µ—à –¥–∞ –¥–æ–±–∞–≤–∏—à —Ä–µ–∞–ª–Ω–∏ –∑–≤—É–∫–æ–≤–∏ —Ñ–∞–π–ª–æ–≤–µ
            console.log(`üîä ${type} sound`);
        }

        // –¢–∞–π–º–µ—Ä
        function startGame() {
            if (timerInterval) return;
            
            startTime = Date.now();
            timerInterval = setInterval(() => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('timer').textContent = 
                    `‚è±Ô∏è ${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }, 1000);
        }

        function resetGame() {
            if (confirm('–°–∏–≥—É—Ä–µ–Ω –ª–∏ —Å–∏, —á–µ –∏—Å–∫–∞—à –¥–∞ —Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞—à –∏–≥—Ä–∞—Ç–∞?')) {
                clearInterval(timerInterval);
                timerInterval = null;
                document.getElementById('timer').textContent = '‚è±Ô∏è 00:00';
                initGame();
            }
        }

        // –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ
        initGame();
    </script>
</body>
</html>
